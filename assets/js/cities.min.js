var add_row=function(o){$("tbody").append("<tr onclick=\"document.location = 'routes.html?city_id="+o+'\';"><td><row class="city">\n    <span  id="A">'+o+'</span>\n    <span id="B">'+rand(2,90)+" routes</span>\n    </row></td></tr>")},rand=function(o,n){return Math.floor(Math.random()*(n-o+1)+o)},rand_color=function(){return["#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177"][Math.floor(5*Math.random())]},LINE_WIDTH_DEFAULT=.5,LINE_WIDTH_SELECTED=3;mapkit.init({authorizationCallback:function(o){o("eyJhbGciOiJFUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6IjgzQ1dGWjhQNjIifQ.eyJpc3MiOiI1VkdLUDJRVjZIIiwiaWF0IjoxNjE2OTA0NzYzLCJleHAiOjE2MTk1ODMxNjN9.nME9bxXIl3eE1-43BVKu7XmZAyRGfAZGhOOhiIL-mnuyJu2gLq_9vxQQ-Jjly-KUtWAArs0DnHTa9Z4-_F2gYQ")}});var map=new mapkit.Map("map",{isRotationEnabled:!1}),infoPopup=document.getElementById("infoPopup"),infoCountry=infoPopup.querySelector(".info-country"),infoPopulation=infoPopup.querySelector(".info-population"),mapLegend=document.querySelector(".map-legend");function showInfo(o){null!=infoCountry&&(infoCountry.innerText=o.city),null!=infoPopulation&&(infoPopulation.innerText=o.town),null!=infoPopup&&(infoPopup.style.display="block")}function closeInfo(){infoPopup.style.display="none"}mapkit.importGeoJSON("assets/data/Neighborhoods-CA.geojson",{itemForMultiPolygon:function(o,n){var t=o.getFlattenedItemList().reduce(function(o,n){return o.concat(n.points)},[]);return new mapkit.PolygonOverlay(t)},itemForFeature:function(o,n){return o.data={city:n.properties.CITY,town:n.properties.NAME},add_row(o.data.town),o.style=new mapkit.Style({fillOpacity:.7,lineWidth:LINE_WIDTH_DEFAULT,fillColor:rand_color()}),o},geoJSONDidComplete:function(o){map.addItems(o),map.showItems(o)}}),map.addEventListener("select",function(o){o.overlay&&o.overlay.data&&(o.overlay.style.lineWidth=LINE_WIDTH_SELECTED,showInfo(o.overlay.data))}),map.addEventListener("deselect",function(o){o.overlay&&(o.overlay.style.lineWidth=LINE_WIDTH_DEFAULT,closeInfo())});