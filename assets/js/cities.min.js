var add_row=function(n){$("tbody").append("<tr onclick=\"document.location = 'routes.html?city_id="+n+'\';"><td><row class="city">\n    <span onmouseover="hoverHandler(this)" onmouseout="unhoverHandler(this)" id="A">'+n+'</span>\n    <span id="B">'+rand(2,90)+" routes</span>\n    </row></td></tr>")},rand=function(n,o){return Math.floor(Math.random()*(o-n+1)+n)},rand_color=function(){return["#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177"][Math.floor(5*Math.random())]},LINE_WIDTH_DEFAULT=.5,LINE_WIDTH_SELECTED=3;mapkit.init({authorizationCallback:function(n){n("eyJhbGciOiJFUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6IllVNEE2Mk02N0YifQ.eyJpc3MiOiI1VkdLUDJRVjZIIiwiaWF0IjoxNjIwMTA3Njc4LCJleHAiOjE2MjM3MTUyMDB9.evUExBAjsE2UfPn7y697fCsMlntcpexMATG55fi29-pktwUqn8sn21l_i6SdVcs4KmhyO4JDbnIF_sFbbAzn_w")}});var map=new mapkit.Map("map",{isRotationEnabled:!1}),infoPopup=document.getElementById("infoPopup"),infoCountry=infoPopup.querySelector(".info-country"),infoPopulation=infoPopup.querySelector(".info-population"),mapLegend=document.querySelector(".map-legend");function showInfo(n){null!=infoCountry&&(infoCountry.innerText=n.city),null!=infoPopulation&&(infoPopulation.innerText=n.town),null!=infoPopup&&(infoPopup.style.display="block")}function closeInfo(){infoPopup.style.display="none"}var towns=[],all_overlays=[];mapkit.importGeoJSON("assets/data/Neighborhoods-CA.geojson",{itemForMultiPolygon:function(n,o){var t=n.getFlattenedItemList().reduce(function(n,o){return n.concat(o.points)},[]);return new mapkit.PolygonOverlay(t)},itemForFeature:function(n,o){return n.data={city:o.properties.CITY,town:o.properties.NAME},towns.push(null==n?void 0:n.data.town),n.style=new mapkit.Style({fillOpacity:.7,lineWidth:LINE_WIDTH_DEFAULT,fillColor:rand_color()}),all_overlays.push(n),n},geoJSONDidComplete:function(n){map.addItems(n),map.showItems(n),towns.sort().map(add_row)}}),map.addEventListener("select",function(n){n.overlay&&n.overlay.data&&(n.overlay.style.lineWidth=LINE_WIDTH_SELECTED,showInfo(n.overlay.data))}),map.addEventListener("deselect",function(n){n.overlay&&(n.overlay.style.lineWidth=LINE_WIDTH_DEFAULT,closeInfo())});var hoverHandler=function(n){var o=find_overlay(n.innerHTML);o.style.lineWidth=LINE_WIDTH_SELECTED,showInfo(o.data)},unhoverHandler=function(n){find_overlay(n.innerHTML).style.lineWidth=LINE_WIDTH_DEFAULT,closeInfo()},find_overlay=function(o){return all_overlays.filter(function(n){return n.data.town===o})[0]};